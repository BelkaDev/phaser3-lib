!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexroundrectangle=e()}(void 0,function(){function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function e(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(r);if(n){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return o(this,t)}}function y(t,e,i){var r=i.length;if(2<=r){var n=i[r-2],s=i[r-1];if(t===n&&e===s)return i}return i.push(t,e),i}function h(t,e,i,r,n,s,o,a,u){o&&n<s?s-=360:!o&&s<n&&(s+=360);var h=p(s-n)/a;n=p(n);for(var l=0;l<=a;l++){var c=n+h*l,d=t+i*Math.cos(c),f=e+r*Math.sin(c);y(d,f,u)}return u}var n=Phaser.Utils.Objects.GetValue,k=function(){function s(t,e,i,r,n){x(this,s),void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,r,n)}return t(s,[{key:"setTo",value:function(t,e,i,r,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(i,r),this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setRadius",value:function(t){return void 0===t&&(t=0),this.radius=t,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"minWidth",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}},{key:"minHeight",get:function(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}},{key:"width",get:function(){return this._width},set:function(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}},{key:"height",get:function(){return this._height},set:function(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}},{key:"radius",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)},set:function(t){var e,i;i="number"==typeof t?e=t:(e=n(t,"x",0),n(t,"y",0));var r=this.cornerRadius;r.tl=a(n(t,"tl",void 0),e,i),r.tr=a(n(t,"tr",void 0),e,i),r.bl=a(n(t,"bl",void 0),e,i),r.br=a(n(t,"br",void 0),e,i)}},{key:"radiusTL",get:function(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)},set:function(t){u(this.cornerRadius.tl,t)}},{key:"radiusTR",get:function(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)},set:function(t){u(this.cornerRadius.tr,t)}},{key:"radiusBL",get:function(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)},set:function(t){u(this.cornerRadius.bl,t)}},{key:"radiusBR",get:function(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)},set:function(t){u(this.cornerRadius.br,t)}}]),s}(),a=function(t,e,i){return void 0===t?t={x:e,y:i}:"number"==typeof t&&(t={x:t,y:t}),l(t),t},u=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=n(e,"x",0),t.y=n(e,"y",0)),l(t)},l=function(t){t.convex=0<=t.x||0<=t.y,t.x=Math.abs(t.x),t.y=Math.abs(t.y)},p=Phaser.Math.DegToRad,O=Phaser.Renderer.WebGL.Utils,v=Phaser.Renderer.WebGL.Utils,c=Phaser.GameObjects.GetCalcMatrix,A=Phaser.Renderer.Canvas.SetTransform,d={renderWebGL:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),s=c(e,i,r),o=n.calcMatrix.copyFrom(s.calc),a=e._displayOriginX,u=e._displayOriginY,h=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&function(t,e,i,r,n,s){for(var o=O.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),a=i.pathData,u=i.pathIndexes,h=0;h<u.length;h+=3){var l=2*u[h],c=2*u[h+1],d=2*u[h+2],f=a[0+l]-n,y=a[1+l]-s,p=a[0+c]-n,v=a[1+c]-s,g=a[0+d]-n,b=a[1+d]-s,x=e.getX(f,y),k=e.getY(f,y),R=e.getX(p,v),m=e.getY(p,v),T=e.getX(g,b),_=e.getY(g,b);t.batchTri(i,x,k,R,m,T,_,0,0,1,1,o,o,o,2)}}(n,o,e,h,a,u),e.isStroked&&function(t,e,i,r,n){var s=t.strokeTint,o=v.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);s.TL=o,s.TR=o,s.BL=o,s.BR=o;var a=e.pathData,u=a.length-1,h=e.lineWidth,l=h/2,c=a[0]-r,d=a[1]-n;e.closePath||(u-=2);for(var f=2;f<u;f+=2){var y=a[f]-r,p=a[f+1]-n;t.batchLine(c,d,y,p,l,l,h,f-2,!!e.closePath&&f===u-1),c=y,d=p}}(n,e,h,a,u),t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n,s,o,a,u,h,l,c,d,f,y,p,v,g,b,x,k,R,m=t.currentContext;if(A(t,m,e,i,r)){var T=e._displayOriginX,_=e._displayOriginY,O=e.pathData,P=O.length-1,w=O[0]-T,S=O[1]-_;m.beginPath(),m.moveTo(w,S),e.closePath||(P-=2);for(var C=2;C<P;C+=2){var L=O[C]-T,j=O[C+1]-_;m.lineTo(L,j)}m.closePath(),e.isFilled&&(f=m,y=e,g=p||y.fillColor,b=v||y.fillAlpha,x=(16711680&g)>>>16,k=(65280&g)>>>8,R=255&g,f.fillStyle="rgba("+x+","+k+","+R+","+b+")",m.fill()),e.isStroked&&(n=m,s=e,u=o||s.strokeColor,h=a||s.strokeAlpha,l=(16711680&u)>>>16,c=(65280&u)>>>8,d=255&u,n.strokeStyle="rgba("+l+","+c+","+d+","+h+")",n.lineWidth=s.lineWidth,m.stroke()),m.restore()}}},f=Phaser.GameObjects.Shape,R=Phaser.Utils.Objects.IsPlainObject,m=Phaser.Utils.Objects.GetValue,T=Phaser.Geom.Polygon.Earcut,g=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(b,f);var g=e(b);function b(t,e,i,r,n,s,o,a){var u,h,l,c,d;if(x(this,b),R(e)){var f=e;e=f.x,i=f.y,r=f.width,n=f.height,s=f.radius,o=f.color,a=f.alpha,h=f.strokeColor,l=f.strokeAlpha,c=f.strokeWidth,d=f.shape}void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=r),void 0===s&&(s=0),void 0===d&&(d=0);var y=new k;if((u=g.call(this,t,"rexRoundRectangleShape",y)).setShapeType(d),0===u.shapeType){var p=m(s,"radius",s);y.setTo(0,0,r,n,p)}else{p={x:r/2,y:n/2};y.setTo(0,0,r,n,p)}var v=m(s,"iteration",void 0);return u.setIteration(v),u.setPosition(e,i),u.setFillStyle(o,a),void 0!==h&&void 0===c&&(c=2),u.setStrokeStyle(c,h,l),u.updateDisplayOrigin(),u.dirty=!0,u}return t(b,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&0<this._fillAlpha}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=0<t&&null!=this._fillColor}},{key:"setFillStyle",value:function(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&0<this._lineWidth}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=0<t&&null!=this._strokeColor}},{key:"setStrokeStyle",value:function(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}},{key:"updateData",value:function(){var t=this.geom,e=this.pathData;e.length=0;var i,r=t.width,n=t.height,s=t.cornerRadius,o=this.iteration+1;if(i=s.tl,_(i))if(i.convex){var a=i.x,u=i.y;h(a,u,i.x,i.y,180,270,!1,o,e)}else{h(a=0,u=0,i.x,i.y,90,0,!0,o,e)}else y(0,0,e);if(i=s.tr,_(i))if(i.convex){a=r-i.x,u=i.y;h(a,u,i.x,i.y,270,360,!1,o,e)}else{h(a=r,u=0,i.x,i.y,180,90,!0,o,e)}else y(r,0,e);if(i=s.br,_(i))if(i.convex){a=r-i.x,u=n-i.y;h(a,u,i.x,i.y,0,90,!1,o,e)}else{h(a=r,u=n,i.x,i.y,270,180,!0,o,e)}else y(r,n,e);if(i=s.bl,_(i))if(i.convex){a=i.x,u=n-i.y;h(a,u,i.x,i.y,90,180,!1,o,e)}else{h(a=0,u=n,i.x,i.y,360,270,!0,o,e)}else y(0,n,e);return e.push(e[0],e[1]),this.pathIndexes=T(e),this}},{key:"setShapeType",value:function(t){return"string"==typeof t&&(t=P[t]),this.shapeType=t,this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height)}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t)}},{key:"setSize",value:function(t,e){if(void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),1===this.shapeType&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}},{key:"radius",get:function(){return this.geom.radius},set:function(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}},{key:"radiusTL",get:function(){return this.geom.radiusTL},set:function(t){this.geom.radiusTL=t,this.dirty=!0}},{key:"radiusTR",get:function(){return this.geom.radiusTR},set:function(t){this.geom.radiusTR=t,this.dirty=!0}},{key:"radiusBL",get:function(){return this.geom.radiusBL},set:function(t){this.geom.radiusBL=t,this.dirty=!0}},{key:"radiusBR",get:function(){return this.geom.radiusBR},set:function(t){this.geom.radiusBR=t,this.dirty=!0}},{key:"setRadius",value:function(t){return void 0===t&&(t=0),this.radius=t,this}},{key:"setRadiusTL",value:function(t){return void 0===t&&(t=0),this.radiusTL=t,this}},{key:"setRadiusTR",value:function(t){return void 0===t&&(t=0),this.radiusTR=t,this}},{key:"setRadiusBL",value:function(t){return void 0===t&&(t=0),this.radiusBL=t,this}},{key:"setRadiusBR",value:function(t){return void 0===t&&(t=0),this.radiusBR=t,this}},{key:"cornerRadius",get:function(){return this.geom.cornerRadius},set:function(t){this.radius=t}},{key:"setCornerRadius",value:function(t){return this.setRadius(t)}},{key:"iteration",get:function(){return this._iteration},set:function(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}},{key:"setIteration",value:function(t){return void 0===t&&(t=6),this.iteration=t,this}}]),b}(),_=function(t){return 0<t.x&&0<t.y},P={rectangle:0,circle:1};return Object.assign(g.prototype,d),g});
