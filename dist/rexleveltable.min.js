!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexleveltable=e();}(undefined,(function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,s=void 0,"symbol"==typeof(s=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(r,"string"))?s:String(s)),n);}var r,s;}var e={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},i=Phaser.Utils.Objects.GetValue,n=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=i(t,"eventEmitter",void 0),r=i(t,"EventEmitterClass",void 0);this.setEventEmitter(n,r),this.setTable(i(t,"table")),this.setExp(i(t,"exp",0)),this.requiredExp=this.getRequiredExpToNextLevel(this.level,this.exp);}var n,r;return n=e,(r=[{key:"setTable",value:function(t){var e;return this.levelTable=t,this.isLevelMapFunction=(e=t)&&"function"==typeof e,this}},{key:"setExp",value:function(t){return this.exp=t,this.level=this.getLevel(t),this}},{key:"getExp",value:function(t){return void 0===t?this.exp:this.isLevelMapFunction?this.levelTable(t):this.levelTable[t]}},{key:"getLevel",value:function(t,e){if(void 0===t)return this.level;for(void 0===e&&(e=0);!(this.getExp(e+1)>=t);)e++;return e}},{key:"getRequiredExpToNextLevel",value:function(t,e){return this.getExp(t+1)-e}},{key:"checkLevel",value:function(t,e){return e>=this.getExp(t)&&e<this.getExp(t+1)}},{key:"gainExp",value:function(t){if(0===t)return this;for(var e=this.exp,i=this.level,n=e+t,r=this.getLevel(n,i),s=e;;){var v=this.getExp(i),o=this.getExp(i+1),h=Math.min(o,n);if(this.emit("levelup",i,s,h,v,o),i++,h===n)break;s=o;}return this.exp=n,this.level=r,this.requiredExp=this.getRequiredExpToNextLevel(n,r),this}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();return Object.assign(n.prototype,e),n}));
