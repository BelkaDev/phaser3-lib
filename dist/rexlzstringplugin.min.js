!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexlzstringplugin=t()}(void 0,function(){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(n.key),n)}}function i(e,t,r){t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1})}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r);return c(this,n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,v,r,p,l,f,h,d={exports:{}};function m(e,t){if(!l[e]){l[e]={};for(var r=0;r<e.length;r++)l[e][e.charAt(r)]=r}return l[e][t]}t=d,v=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={},h=f={compressToBase64:function(e){if(null==e)return"";var t=f._compress(e,6,function(e){return r.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:f._decompress(t.length,32,function(e){return m(r,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":f._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:f._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=f.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var i=t.charCodeAt(n);r[2*n]=i>>>8,r[2*n+1]=i%256}return r},decompressFromUint8Array:function(e){if(null==e)return f.decompress(e);for(var t=new Array(e.length/2),r=0,n=t.length;r<n;r++)t[r]=256*e[2*r]+e[2*r+1];var o=[];return t.forEach(function(e){o.push(v(e))}),f.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":f._compress(e,6,function(e){return p.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),f._decompress(t.length,32,function(e){return m(p,t.charAt(e))}))},compress:function(e){return f._compress(e,16,function(e){return v(e)})},_compress:function(e,t,r){if(null==e)return"";for(var n,o,i,s,u={},c={},a="",p=2,l=3,f=2,h=[],d=0,m=0,y=0;y<e.length;y+=1)if(i=e.charAt(y),Object.prototype.hasOwnProperty.call(u,i)||(u[i]=l++,c[i]=!0),s=a+i,Object.prototype.hasOwnProperty.call(u,s))a=s;else{if(Object.prototype.hasOwnProperty.call(c,a)){if(a.charCodeAt(0)<256){for(n=0;n<f;n++)d<<=1,m==t-1?(m=0,h.push(r(d)),d=0):m++;for(o=a.charCodeAt(0),n=0;n<8;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1}else{for(o=1,n=0;n<f;n++)d=d<<1|o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o=0;for(o=a.charCodeAt(0),n=0;n<16;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1}0==--p&&(p=Math.pow(2,f),f++),delete c[a]}else for(o=u[a],n=0;n<f;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1;0==--p&&(p=Math.pow(2,f),f++),u[s]=l++,a=String(i)}if(""!==a){if(Object.prototype.hasOwnProperty.call(c,a)){if(a.charCodeAt(0)<256){for(n=0;n<f;n++)d<<=1,m==t-1?(m=0,h.push(r(d)),d=0):m++;for(o=a.charCodeAt(0),n=0;n<8;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1}else{for(o=1,n=0;n<f;n++)d=d<<1|o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o=0;for(o=a.charCodeAt(0),n=0;n<16;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1}0==--p&&(p=Math.pow(2,f),f++),delete c[a]}else for(o=u[a],n=0;n<f;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1;0==--p&&(p=Math.pow(2,f),f++)}for(o=2,n=0;n<f;n++)d=d<<1|1&o,m==t-1?(m=0,h.push(r(d)),d=0):m++,o>>=1;for(;;){if(d<<=1,m==t-1){h.push(r(d));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:f._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,r){for(var n,o,i,s,u,c,a=[],p=4,l=4,f=3,h="",d=[],m={val:r(0),position:t,index:1},y=0;y<3;y+=1)a[y]=y;for(o=0,s=Math.pow(2,2),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;switch(o){case 0:for(o=0,s=Math.pow(2,8),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;c=v(o);break;case 1:for(o=0,s=Math.pow(2,16),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;c=v(o);break;case 2:return""}for(n=a[3]=c,d.push(c);;){if(e<m.index)return"";for(o=0,s=Math.pow(2,f),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;switch(c=o){case 0:for(o=0,s=Math.pow(2,8),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;a[l++]=v(o),c=l-1,p--;break;case 1:for(o=0,s=Math.pow(2,16),u=1;u!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=r(m.index++)),o|=(0<i?1:0)*u,u<<=1;a[l++]=v(o),c=l-1,p--;break;case 2:return d.join("")}if(0==p&&(p=Math.pow(2,f),f++),a[c])h=a[c];else{if(c!==l)return null;h=n+n.charAt(0)}d.push(h),a[l++]=n+h.charAt(0),n=h,0==--p&&(p=Math.pow(2,f),f++)}}},null!=t&&(t.exports=h);var y=e(d.exports),b=Phaser.Utils.Objects.GetFastValue,g=function(){function t(e){o(this,t),this.resetFromJSON(e)}return i(t,[{key:"resetFromJSON",value:function(e){return this.setEncoding(b(e,"encoding",0)),this}},{key:"toJSON",value:function(){return{encoding:this.encoding}}},{key:"setEncoding",value:function(e){return void 0===e?e=0:"string"==typeof e&&(e=w[e.toLowerCase()]||0),this.encoding=e,this}},{key:"compress",value:function(e){var t=O[this.encoding];return y[t](e)}},{key:"decompress",value:function(e){var t=j[this.encoding];return y[t](e)}}]),t}(),w={none:0,base64:1,utf16:2,uri:3},O=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],j=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];return function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e);var r=a(n);function n(e){return o(this,n),(e=r.call(this,e)).lzstring=new g,e}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"destroy",value:function(){this.lzstring=null,this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}},{key:"add",value:function(e){return new g(e)}}]),n}(Phaser.Plugins.BasePlugin)});
