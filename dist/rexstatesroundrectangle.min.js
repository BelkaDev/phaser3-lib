!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexstatesroundrectangle=e()}(void 0,function(){function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(r.key),r)}}function t(t,e,i){e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1})}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");e=t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=n(i);return o(this,r?(t=n(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t,e,i){if(2<=(n=i.length)){var r=i[n-2],n=i[n-1];if(t===r&&e===n)return}i.push(t,e)}function u(t,e,i,r,n,o,s,a,u){s&&n<o?o-=360:!s&&o<n&&(o+=360);var h=v(o-n)/a;n=v(n);for(var l=0;l<=a;l++){var c=n+h*l,d=t+i*Math.cos(c),c=e+r*Math.sin(c);f(d,c,u)}}function a(t,e,i){var r=P(t,e);if(i)for(var n in r)i.hasOwnProperty(n)&&(r[i[n]]=r[n],delete r[n]);return r}function h(t,e){var i;return!e||function(t,e){for(var i in t){if(!(i in e))return!1;if(t[i]!==e[i])return!1}for(var i in e)if(!(i in t))return!1;return!0}(i=function(t,e,i){if(void 0===i&&(i={}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++)i[o=e[r]]=t[o];else for(var o in e)i[o]=t[o];return i}(t,e),e)?void 0:(t.modifyStyle(e),i)}var l=Phaser.Utils.Objects.GetValue,g=function(){function o(t,e,i,r,n){p(this,o),void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,r,n)}return t(o,[{key:"setTo",value:function(t,e,i,r,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(i,r),this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setRadius",value:function(t){return this.radius=t=void 0===t?0:t,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"minWidth",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}},{key:"minHeight",get:function(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}},{key:"width",get:function(){return this._width},set:function(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}},{key:"height",get:function(){return this._height},set:function(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}},{key:"radius",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)},set:function(t){var e,i="number"==typeof t?e=t:(e=l(t,"x",0),l(t,"y",0)),r=this.cornerRadius;r.tl=c(l(t,"tl",void 0),e,i),r.tr=c(l(t,"tr",void 0),e,i),r.bl=c(l(t,"bl",void 0),e,i),r.br=c(l(t,"br",void 0),e,i)}},{key:"radiusTL",get:function(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)},set:function(t){d(this.cornerRadius.tl,t)}},{key:"radiusTR",get:function(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)},set:function(t){d(this.cornerRadius.tr,t)}},{key:"radiusBL",get:function(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)},set:function(t){d(this.cornerRadius.bl,t)}},{key:"radiusBR",get:function(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)},set:function(t){d(this.cornerRadius.br,t)}}]),o}(),c=function(t,e,i){return void 0===t?t={x:e,y:i}:"number"==typeof t&&(t={x:t,y:t}),y(t),t},d=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=l(e,"x",0),t.y=l(e,"y",0)),y(t)},y=function(t){t.convex=0<=t.x||0<=t.y,t.x=Math.abs(t.x),t.y=Math.abs(t.y)},v=Phaser.Math.DegToRad,D=Phaser.Renderer.WebGL.Utils,F=Phaser.Renderer.WebGL.Utils,G=Phaser.GameObjects.GetCalcMatrix,b=Phaser.Renderer.Canvas.SetTransform,k={renderWebGL:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),r=G(e,i,r),r=n.calcMatrix.copyFrom(r.calc),o=e._displayOriginX,s=e._displayOriginY,i=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled)for(var a=n,u=r,h=e,r=i,l=o,c=s,d=D.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),f=h.pathData,y=h.pathIndexes,v=0;v<y.length;v+=3){var p=2*y[v],g=2*y[v+1],b=2*y[v+2],k=f[0+p]-l,p=f[1+p]-c,x=f[0+g]-l,g=f[1+g]-c,S=f[0+b]-l,b=f[1+b]-c,m=u.getX(k,p),k=u.getY(k,p),p=u.getX(x,g),x=u.getY(x,g),g=u.getX(S,b),S=u.getY(S,b);a.batchTri(h,m,k,p,x,g,S,0,0,1,1,d,d,d,2)}if(e.isStroked){var R=n,T=e,r=i,_=o,O=s,n=R.strokeTint,r=F.getTintAppendFloatAlpha(T.strokeColor,T.strokeAlpha*r),P=(n.TL=r,n.TR=r,n.BL=r,n.BR=r,T.pathData),w=P.length-1,j=T.lineWidth,A=j/2,C=P[0]-_,L=P[1]-O;T.closePath||(w-=2);for(var B=2;B<w;B+=2){var W=P[B]-_,M=P[B+1]-O;R.batchLine(C,L,W,M,A,A,j,B-2,!!T.closePath&&B===w-1),C=W,L=M}}t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.currentContext;if(b(t,n,e,i,r)){var o=e._displayOriginX,s=e._displayOriginY,a=e.pathData,u=a.length-1,t=a[0]-o,i=a[1]-s;n.beginPath(),n.moveTo(t,i),e.closePath||(u-=2);for(var h=2;h<u;h+=2){var l=a[h]-o,c=a[h+1]-s;n.lineTo(l,c)}n.closePath(),e.isFilled&&(r=e,i=t=void 0,t=t||r.fillColor,i=i||r.fillAlpha,n.fillStyle="rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+(255&t)+","+i+")",n.fill()),e.isStroked&&(r=n,t=e,e=i=void 0,i=i||t.strokeColor,e=e||t.strokeAlpha,r.strokeStyle="rgba("+((16711680&i)>>>16)+","+((65280&i)>>>8)+","+(255&i)+","+e+")",r.lineWidth=t.lineWidth,n.stroke()),n.restore()}}},x=Phaser.GameObjects.Shape,S=Phaser.Utils.Objects.IsPlainObject,m=Phaser.Utils.Objects.GetValue,R=Phaser.Geom.Polygon.Earcut,T=function(){e(v,x);var y=s(v);function v(t,e,i,r,n,o,s,a){p(this,v),S(e)&&(e=(f=e).x,i=f.y,r=f.width,n=f.height,o=f.radius,s=f.color,a=f.alpha,u=f.strokeColor,h=f.strokeAlpha,l=f.strokeWidth,f=f.shape),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=r),void 0===o&&(o=0),void 0===f&&(f=0);var u,h,l,c,d=new g,t=y.call(this,t,"rexRoundRectangleShape",d),f=(t.setShapeType(f),0===t.shapeType?(c=m(o,"radius",o),d.setTo(0,0,r,n,c)):d.setTo(0,0,r,n,c={x:r/2,y:n/2}),m(o,"iteration",void 0));return t.setIteration(f),t.setPosition(e,i),t.setFillStyle(s,a),t.setStrokeStyle(l=void 0!==u&&void 0===l?2:l,u,h),t.updateDisplayOrigin(),t.dirty=!0,t}return t(v,[{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.isFilled=null!=t&&0<this._fillAlpha}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.isFilled=0<t&&null!=this._fillColor}},{key:"setFillStyle",value:function(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this.isStroked=null!=t&&0<this._lineWidth}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.isStroked=0<t&&null!=this._strokeColor}},{key:"setStrokeStyle",value:function(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}},{key:"updateData",value:function(){var t,e,i=this.geom,r=this.pathData,n=(r.length=0,i.width),o=i.height,i=i.cornerRadius,s=this.iteration+1,a=i.tl;return _(a)?a.convex?(t=a.x,e=a.y,u(t,e,a.x,a.y,180,270,!1,s,r)):u(t=0,e=0,a.x,a.y,90,0,!0,s,r):f(0,0,r),a=i.tr,_(a)?a.convex?(t=n-a.x,e=a.y,u(t,e,a.x,a.y,270,360,!1,s,r)):u(t=n,e=0,a.x,a.y,180,90,!0,s,r):f(n,0,r),a=i.br,_(a)?a.convex?(t=n-a.x,e=o-a.y,u(t,e,a.x,a.y,0,90,!1,s,r)):u(t=n,e=o,a.x,a.y,270,180,!0,s,r):f(n,o,r),a=i.bl,_(a)?a.convex?(t=a.x,e=o-a.y,u(t,e,a.x,a.y,90,180,!1,s,r)):u(t=0,e=o,a.x,a.y,360,270,!0,s,r):f(0,o,r),r.push(r[0],r[1]),this.pathIndexes=R(r),this}},{key:"setShapeType",value:function(t){return"string"==typeof t&&(t=O[t]),this.shapeType=t,this}},{key:"width",get:function(){return this.geom.width},set:function(t){this.resize(t,this.height)}},{key:"height",get:function(){return this.geom.height},set:function(t){this.resize(this.width,t)}},{key:"setSize",value:function(t,e){var i;return void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e||(this.geom.setSize(t,e),1===this.shapeType&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0,(i=this.input)&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e)),this}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}},{key:"radius",get:function(){return this.geom.radius},set:function(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}},{key:"radiusTL",get:function(){return this.geom.radiusTL},set:function(t){this.geom.radiusTL=t,this.dirty=!0}},{key:"radiusTR",get:function(){return this.geom.radiusTR},set:function(t){this.geom.radiusTR=t,this.dirty=!0}},{key:"radiusBL",get:function(){return this.geom.radiusBL},set:function(t){this.geom.radiusBL=t,this.dirty=!0}},{key:"radiusBR",get:function(){return this.geom.radiusBR},set:function(t){this.geom.radiusBR=t,this.dirty=!0}},{key:"setRadius",value:function(t){return this.radius=t=void 0===t?0:t,this}},{key:"setRadiusTL",value:function(t){return this.radiusTL=t=void 0===t?0:t,this}},{key:"setRadiusTR",value:function(t){return this.radiusTR=t=void 0===t?0:t,this}},{key:"setRadiusBL",value:function(t){return this.radiusBL=t=void 0===t?0:t,this}},{key:"setRadiusBR",value:function(t){return this.radiusBR=t=void 0===t?0:t,this}},{key:"cornerRadius",get:function(){return this.geom.cornerRadius},set:function(t){this.radius=t}},{key:"setCornerRadius",value:function(t){return this.setRadius(t)}},{key:"iteration",get:function(){return this._iteration},set:function(t){void 0===this._iteration?this._iteration=t:this._iteration!==t&&(this._iteration=t,this.dirty=!0)}},{key:"setIteration",value:function(t){return this.iteration=t=void 0===t?6:t,this}}]),v}(),_=function(t){return 0<t.x&&0<t.y},O={rectangle:0,circle:1},P=(Object.assign(T.prototype,k),function(t,e,i,r){if(void 0===i&&(i="."),void 0===r&&(r={}),t){if(e in t)return Object.assign(r,t[e]);for(var n in e+=i,t)n.startsWith(e)&&(r[n.replace(e,"")]=t[n])}return r}),k={setActiveState:function(t){return this.activeState!==(t=void 0===t?!0:t)&&((this.activeState=t)?this.activeStyleSave=h(this,this.activeStyle):(h(this,this.activeStyleSave),this.activeStyleSave=void 0)),this},setHoverState:function(t){return this.hoverState!==(t=void 0===t?!0:t)&&((this.hoverState=t)?this.hoverStyleSave=h(this,this.hoverStyle):(h(this,this.hoverStyleSave),this.hoverStyleSave=void 0)),this},setDisableState:function(t){return this.disableState!==(t=void 0===t?!0:t)&&((this.disableState=t)?this.disableStyleSave=h(this,this.disableStyle):(h(this,this.disableStyleSave),this.disableStyleSave=void 0)),this}},w=function(){e(r,T);var i=s(r);function r(t,e){return p(this,r),(t=i.call(this,t,e=void 0===e?{}:e)).activeStyle=a(e,"active",j),t.hoverStyle=a(e,"hover",j),t.disableStyle=a(e,"disable",j),t}return t(r,[{key:"modifyStyle",value:function(t){for(var e in t)this[e]=t[e];return this}}]),r}(),j={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};return Object.assign(w.prototype,k),w});
