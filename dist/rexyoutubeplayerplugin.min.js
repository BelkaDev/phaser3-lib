!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexyoutubeplayerplugin=e()}(void 0,function(){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(i.key),i)}}function t(t,e,n){e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(n),e=(t=i?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}}var h=function(t,e){for(var n=document.getElementsByTagName("script"),i=0,r=n.length;i<r;i++)if(-1!=n[i].src.indexOf(t))return void(e&&e());var o=document.createElement("script");o.setAttribute("src",t),e&&(o.onload=e),document.head.appendChild(o)},d=!1,f=[],u=Phaser.GameObjects.DOMElement,b=Phaser.Utils.Objects.IsPlainObject,p=Phaser.Utils.Objects.GetValue,v=Phaser.Math.Clamp,m=Phaser.Utils.String.UUID,s=function(){e(l,u);var s=o(l);function l(t,e,n,i,r,o){c(this,l),b(e)?(e=p(o=e,"x",0),n=p(o,"y",0),i=p(o,"width",0),r=p(o,"height",0)):b(i)&&(i=p(o=i,"width",0),r=p(o,"height",0)),void 0===o&&(o={}),(t=s.call(this,t,e,n)).type="rexYoutubePlayer",t.youtubePlayer=void 0,t.videoState=void 0,t.videoId=p(o,"videoId",""),t.loop=p(o,"loop",!1),t.paddingCallbacks=[];var u="YT".concat(m()),e=document.createElement("div"),a=(e.id=u,t.setElement(e),t.resize(i,r),{autoplay:p(o,"autoPlay",!0)?1:0,controls:p(o,"controls",!0)?1:0,disablekb:p(o,"keyboardControl",!0)?0:1,modestbranding:p(o,"modestBranding",!1)?1:0}),n=function(){var i=new YT.Player(u,{videoId:this.videoId,playerVars:a,events:{onStateChange:function(t){this.videoState=t.data,this.emit("statechange",this),this.emit(this.videoStateString,this),this.videoState===YT.PlayerState.ENDED&&this.loop&&this.youtubePlayer.playVideo()}.bind(this),onReady:function(t){this.youtubePlayer=i;for(var e=0,n=this.paddingCallbacks.length;e<n;e++)this.paddingCallbacks[e]();this.paddingCallbacks=void 0,this.emit("ready",this)}.bind(this),onError:function(t){this.lastError=t.data,this.emit("error",this,this.lastError)}.bind(this)}});this.setElement(document.getElementById(u))}.bind(y(t));return e=n,d?e():(window.onYouTubeIframeAPIReady||(window.onYouTubeIframeAPIReady=function(){d=!0;for(var t=0,e=f.length;t<e;t++)f[t]();f=void 0},h("https://www.youtube.com/iframe_api")),f.push(e)),t}return t(l,[{key:"_runCallback",value:function(t){void 0===this.youtubePlayer?this.paddingCallbacks.push(t):t()}},{key:"videoStateString",get:function(){if(void 0===this.videoState||!YT)return"";switch(this.videoState){case-1:return"unstarted";case YT.PlayerState.ENDED:return"ended";case YT.PlayerState.PLAYING:return"playing";case YT.PlayerState.PAUSED:return"pause";case YT.PlayerState.BUFFERING:return"buffering";case YT.PlayerState.CUED:return"cued"}}},{key:"load",value:function(t,e){void 0===e&&(e=!0);var n=function(){this.youtubePlayer.loadVideoById(t),e?this.youtubePlayer.playVideo():this.youtubePlayer.pauseVideo()}.bind(this);return this._runCallback(n),this}},{key:"play",value:function(){var t=function(){this.youtubePlayer.playVideo()}.bind(this);return this._runCallback(t),this}},{key:"isPlaying",get:function(){return 1===this.videoState}},{key:"pause",value:function(){var t=function(){this.youtubePlayer.pauseVideo()}.bind(this);return this._runCallback(t),this}},{key:"isPaused",get:function(){return 2===this.videoState}},{key:"playbackTime",get:function(){return this.youtubePlayer?this.youtubePlayer.getCurrentTime():0},set:function(t){var e=function(){this.youtubePlayer.seekTo(t)}.bind(this);this._runCallback(e)}},{key:"setPlaybackTime",value:function(t){return this.playbackTime=t,this}},{key:"duration",get:function(){return this.youtubePlayer?this.youtubePlayer.getDuration():0}},{key:"t",get:function(){var t=this.duration;return 0===t?0:this.playbackTime/t},set:function(t){var e=function(){t=v(t,0,1),this.playbackTime=this.duration*v(t,0,1)}.bind(this);this._runCallback(e)}},{key:"setT",value:function(t){return this.t=t,this}},{key:"hasEnded",get:function(){return 0===this.videoState}},{key:"volume",get:function(){return this.youtubePlayer?this.youtubePlayer.getVolume()/100:0},set:function(t){var e=function(){this.youtubePlayer.setVolume(v(100*t,0,100))}.bind(this);this._runCallback(e)}},{key:"setVolume",value:function(t){return this.volume=t,this}},{key:"muted",get:function(){return!!this.youtubePlayer&&this.youtubePlayer.isMuted()},set:function(t){var e=function(){t?this.youtubePlayer.mute():this.youtubePlayer.unMute()}.bind(this);this._runCallback(e)}},{key:"setMute",value:function(t){return this.muted=t=void 0===t?!0:t,this}},{key:"setLoop",value:function(t){return this.loop=t=void 0===t?!0:t,this}}]),l}();function l(t,e,n,i,r){t=new s(this.scene,t,e,n,i,r);return this.scene.add.existing(t),t}Object.assign(s.prototype,{resize:function(t,e){var n;return this.scene.sys.scale.autoRound&&(t=Math.floor(t),e=Math.floor(e)),this.width===t&&this.height===e||((n=this.node.style).width="".concat(t,"px"),n.height="".concat(e,"px"),this.updateSize()),this}});var P=Phaser.Utils.Objects.GetAdvancedValue,g=Phaser.GameObjects.BuildGameObject;function k(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var e=P(t,"width",void 0),n=P(t,"height",void 0),e=new s(this.scene,0,0,e,n,t);return g(this.scene,e,t),e}var w=function(t){return null==t||""===t||0===t.length},S=function(){e(i,Phaser.Plugins.BasePlugin);var n=o(i);function i(t){var e;return c(this,i),e=n.call(this,t),t.registerGameObject("rexYoutubePlayer",l,k),e}return t(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),i}();return function(t,e,n,i){if(void 0===i&&(i="."),"object"===a(t)){if(w(e)){if(null==n)return;"object"===a(n)&&(t=n)}else{i=(e="string"==typeof e?e.split(i):e).pop();(function(t,e,n){var i=t;if(!w(e))for(var r,o=0,u=(e="string"==typeof e?e.split("."):e).length;o<u;o++)null!=i[r=e[o]]&&"object"===a(i[r])||(i[r]=o!==u-1||void 0===n?{}:n),i=i[r];return i})(t,e)[i]=n}}}(window,"RexPlugins.GameObjects.YoutubePlayer",s),S});
