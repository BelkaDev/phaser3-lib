!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rextexttranslationplugin=e()}(void 0,function(){function t(r,t){return t.forEach(function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach(function(t){if("default"!==t&&!(t in r)){var e=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return n[t]}})}})}),Object.freeze(r)}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?i:String(i)),r)}var o,i}function e(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(r);if(o){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,t)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function f(t,e){var n;return(n=t)&&"function"==typeof n?e={config:{callback:t,scope:e}}:y(t)?(e=t).hasOwnProperty("config")||(e={config:e}):e={key:t,config:e},this.addFile(new g(this,e)),this}var p={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},h=Phaser.Loader.FILE_POPULATED,d=Phaser.Utils.String.UUID,g=function(){a(r,Phaser.Loader.File);var n=c(r);function r(t,e){return i(this,r),e.hasOwnProperty("type")||(e.type="await"),e.hasOwnProperty("url")||(e.url=""),e.hasOwnProperty("key")||(e.key=d()),n.call(this,t,e)}return e(r,[{key:"load",value:function(){if(this.state===h)this.loader.nextFile(this,!0);else{var t=this.config,e=t.callback,n=t.scope,r=this.onLoad.bind(this),o=this.onError.bind(this);e?n?e.call(n,r,o):e(r,o):this.onLoad()}}},{key:"onLoad",value:function(){this.loader.nextFile(this,!0)}},{key:"onError",value:function(){this.loader.nextFile(this,!1)}}]),r}(),y=Phaser.Utils.Objects.IsPlainObject;function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);var r=n.call(t,e||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===M(e)?e:String(e)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function O(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function S(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Phaser.Loader.FileTypesManager.register("rexAwait",f);var C={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}};function T(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};v(this,T),this.init(t,e)}var D=new(O(T,[{key:"init",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};this.prefix=n.prefix||"i18next:",this.logger=t||C,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(t){return new T(this.logger,N(N({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new T(this.logger,t)}}]),T),_=(O(A,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)}),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter(function(t){return t!==e}):delete this.observers[t])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(t){t.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})}}]),A);function A(){v(this,A),this.observers={}}function I(){var n,r,t=new Promise(function(t,e){n=t,r=e});return t.resolve=n,t.reject=r,t}function F(t){return null==t?"":""+t}function U(t,e,n){function r(t){return t&&-1<t.indexOf("###")?t.replace(/###/g,"."):t}function o(){return!t||"string"==typeof t}for(var i="string"!=typeof e?[].concat(e):e.split(".");1<i.length;){if(o())return{};var a=r(i.shift());!t[a]&&n&&(t[a]=new n),t=Object.prototype.hasOwnProperty.call(t,a)?t[a]:{}}return o()?{}:{obj:t,k:r(i.shift())}}function B(t,e,n){var r=U(t,e,Object);r.obj[r.k]=n}function H(t,e){var n=U(t,e),r=n.obj,o=n.k;if(r)return r[o]}function q(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function K(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return V[t]}):t}var J="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&-1<window.navigator.userAgent.indexOf("MSIE"),z=[" ",",","?","!",";"];function X(t,e,n){var r=2<arguments.length&&void 0!==n?n:".";if(t){if(t[e])return t[e];for(var o=e.split(r),i=t,a=0;a<o.length;++a){if(!i)return;if("string"==typeof i[o[a]]&&a+1<o.length)return;if(void 0===i[o[a]]){for(var s=2,u=o.slice(a,a+s).join(r),c=i[u];void 0===c&&o.length>a+s;)s++,c=i[u=o.slice(a,a+s).join(r)];if(void 0===c)return;if(null===c)return null;if(e.endsWith(u)){if("string"==typeof c)return c;if(u&&"string"==typeof c[u])return c[u]}var l=o.slice(a+s).join(r);return l?X(c,l,r):void 0}i=i[o[a]]}return i}}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}var Y=function(){x(o,_);var r=W(o);function o(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return v(this,o),e=r.call(this),J&&_.call(w(e)),e.data=t||{},e.options=n,void 0===e.options.keySeparator&&(e.options.keySeparator="."),void 0===e.options.ignoreJSONStructure&&(e.options.ignoreJSONStructure=!0),e}return O(o,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);-1<e&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n,r){var o=3<arguments.length&&void 0!==r?r:{},i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,a=void 0!==o.ignoreJSONStructure?o.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[t,e];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(i?n.split(i):n)),-1<t.indexOf(".")&&(s=t.split("."));var u=H(this.data,s);return u||!a||"string"!=typeof n?u:X(this.data&&this.data[t]&&this.data[t][e],n,i)}},{key:"addResource",value:function(t,e,n,r,o){var i=4<arguments.length&&void 0!==o?o:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var s=[t,e];n&&(s=s.concat(a?n.split(a):n)),-1<t.indexOf(".")&&(r=e,e=(s=t.split("."))[1]),this.addNamespaces(e),B(this.data,s,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n,r){var o=3<arguments.length&&void 0!==r?r:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});o.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,o,i){var a=5<arguments.length&&void 0!==i?i:{silent:!1},s=[t,e];-1<t.indexOf(".")&&(r=n,n=e,e=(s=t.split("."))[1]),this.addNamespaces(e);var u=H(this.data,s)||{};r?function t(e,n,r){for(var o in n)"__proto__"!==o&&"constructor"!==o&&(o in e?"string"==typeof e[o]||e[o]instanceof String||"string"==typeof n[o]||n[o]instanceof String?r&&(e[o]=n[o]):t(e[o],n[o],r):e[o]=n[o]);return e}(u,n,o):u=$($({},u),n),B(this.data,s,u),a.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e=e||this.options.defaultNS,"v1"===this.options.compatibilityAPI?$($({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(function(t){return e[t]&&0<Object.keys(e[t]).length})}},{key:"toJSON",value:function(){return this.data}}]),o}(),Q={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,o){var i=this;return t.forEach(function(t){i.processors[t]&&(e=i.processors[t].process(e,n,r,o))}),e}};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}var nt={},rt=function(){x(B,_);var a=et(B);function B(t){var e,n,r,o,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return v(this,B),e=a.call(this),J&&_.call(w(e)),n=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r=t,o=w(e),n.forEach(function(t){r[t]&&(o[t]=r[t])}),e.options=i,void 0===e.options.keySeparator&&(e.options.keySeparator="."),e.logger=D.create("translator"),e}return O(B,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{interpolation:{}};if(null==t)return!1;var r=this.resolve(t,n);return r&&void 0!==r.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,o=e.ns||this.options.defaultNS||[],i=n&&-1<t.indexOf(n),a=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,n){e=e||"",n=n||"";var r=z.filter(function(t){return e.indexOf(t)<0&&n.indexOf(t)<0});if(0===r.length)return 1;var o=new RegExp("(".concat(r.map(function(t){return"?"===t?"\\?":t}).join("|"),")")),i=!o.test(t);if(!i){var a=t.indexOf(n);0<a&&!o.test(t.substring(0,a))&&(i=!0)}return i}(t,n,r));if(i&&!a){var s=t.match(this.interpolator.nestingRegexp);if(s&&0<s.length)return{key:t,namespaces:o};var u=t.split(n);(n!==r||n===r&&-1<this.options.ns.indexOf(u[0]))&&(o=u.shift()),t=u.join(r)}return"string"==typeof o&&(o=[o]),{key:t,namespaces:o}}},{key:"translate",value:function(t,o,e){var i=this;if("object"!==M(o)&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),"object"===M(o)&&(o=tt({},o)),o=o||{},null==t)return"";Array.isArray(t)||(t=[String(t)]);var n=void 0!==o.returnDetails?o.returnDetails:this.options.returnDetails,r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],o),s=a.key,u=a.namespaces,c=u[u.length-1],l=o.lng||this.language,f=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(f){var p=o.nsSeparator||this.options.nsSeparator;return n?{res:"".concat(c).concat(p).concat(s),usedKey:s,exactUsedKey:s,usedLng:l,usedNS:c}:"".concat(c).concat(p).concat(s)}return n?{res:s,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:c}:s}var h=this.resolve(t,o),d=h&&h.res,g=h&&h.usedKey||s,y=h&&h.exactUsedKey||s,v=Object.prototype.toString.apply(d),m=void 0!==o.joinArrays?o.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&d&&("string"!=typeof d&&"boolean"!=typeof d&&"number"!=typeof d)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(v)<0&&("string"!=typeof m||"[object Array]"!==v)){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,d,tt(tt({},o),{},{ns:u})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return n?(h.res=O,h):O}if(r){var w="[object Array]"===v,k=w?[]:{},x=w?y:g;for(var S in d)if(Object.prototype.hasOwnProperty.call(d,S)){var P="".concat(x).concat(r).concat(S);k[S]=this.translate(P,tt(tt({},o),{joinArrays:!1,ns:u})),k[S]===P&&(k[S]=d[S])}d=k}}else if(b&&"string"==typeof m&&"[object Array]"===v)d=(d=d.join(m))&&this.extendTranslation(d,t,o,e);else{var j=!1,E=!1,L=void 0!==o.count&&"string"!=typeof o.count,R=B.hasDefaultValue(o),N=L?this.pluralResolver.getSuffix(l,o.count,o):"",C=o["defaultValue".concat(N)]||o.defaultValue;!this.isValidLookup(d)&&R&&(j=!0,d=C),this.isValidLookup(d)||(E=!0,d=s);var T=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:d,D=R&&C!==d&&this.options.updateMissing;if(E||j||D){if(this.logger.log(D?"updateKey":"missingKey",l,c,s,D?C:d),r){var _=this.resolve(s,tt(tt({},o),{},{keySeparator:!1}));_&&_.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var A=[],I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if("fallback"===this.options.saveMissingTo&&I&&I[0])for(var F=0;F<I.length;F++)A.push(I[F]);else"all"===this.options.saveMissingTo?A=this.languageUtils.toResolveHierarchy(o.lng||this.language):A.push(o.lng||this.language);function U(t,e,n){var r=R&&n!==d?n:T;i.options.missingKeyHandler?i.options.missingKeyHandler(t,c,e,r,D,o):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(t,c,e,r,D,o),i.emit("missingKey",t,c,e,d)}this.options.saveMissing&&(this.options.saveMissingPlurals&&L?A.forEach(function(e){i.pluralResolver.getSuffixes(e,o).forEach(function(t){U([e],s+t,o["defaultValue".concat(t)]||C)})}):U(A,s,C))}d=this.extendTranslation(d,t,o,h,e),E&&d===s&&this.options.appendNamespaceToMissingKey&&(d="".concat(c,":").concat(s)),(E||j)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(c,":").concat(s):s,j?d:void 0):this.options.parseMissingKeyHandler(d))}return n?(h.res=d,h):d}},{key:"extendTranslation",value:function(t,r,o,e,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,tt(tt({},this.options.interpolation.defaultVariables),o),e.usedLng,e.usedNS,e.usedKey,{resolved:e});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(tt(tt({},o),{interpolation:tt(tt({},this.options.interpolation),o.interpolation)}));var n,s="string"==typeof t&&(o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var u=t.match(this.interpolator.nestingRegexp);n=u&&u.length}var c=o.replace&&"string"!=typeof o.replace?o.replace:o;if(this.options.interpolation.defaultVariables&&(c=tt(tt({},this.options.interpolation.defaultVariables),c)),t=this.interpolator.interpolate(t,c,o.lng||this.language,o),s){var l=t.match(this.interpolator.nestingRegexp);n<(l&&l.length)&&(o.nest=!1)}!o.lng&&"v1"!==this.options.compatibilityAPI&&e&&e.res&&(o.lng=e.usedLng),!1!==o.nest&&(t=this.interpolator.nest(t,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i&&i[0]===e[0]&&!o.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(e[0]," in key: ").concat(r[0])),null):a.translate.apply(a,e.concat([r]))},o)),o.interpolation&&this.interpolator.reset()}var f=o.postProcess||this.options.postProcess,p="string"==typeof f?[f]:f;return null!=t&&p&&p.length&&!1!==o.applyPostProcessor&&(t=Q.handle(p,t,r,this.options&&this.options.postProcessPassResolved?tt({i18nResolved:e},o):o,this)),t}},{key:"resolve",value:function(t,e){var f,o,p,h,i,d=this,g=1<arguments.length&&void 0!==e?e:{};return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!d.isValidLookup(f)){var e=d.extractFromKey(t,g),s=e.key;o=s;var n=e.namespaces;d.options.fallbackNS&&(n=n.concat(d.options.fallbackNS));var u=void 0!==g.count&&"string"!=typeof g.count,c=u&&!g.ordinal&&0===g.count&&d.pluralResolver.shouldUseIntlApi(),l=void 0!==g.context&&("string"==typeof g.context||"number"==typeof g.context)&&""!==g.context,r=g.lngs?g.lngs:d.languageUtils.toResolveHierarchy(g.lng||d.language,g.fallbackLng);n.forEach(function(a){d.isValidLookup(f)||(i=a,!nt["".concat(r[0],"-").concat(a)]&&d.utils&&d.utils.hasLoadedNamespace&&!d.utils.hasLoadedNamespace(i)&&(nt["".concat(r[0],"-").concat(a)]=!0,d.logger.warn('key "'.concat(o,'" for languages "').concat(r.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),r.forEach(function(t){if(!d.isValidLookup(f)){h=t;var e,n=[s];if(d.i18nFormat&&d.i18nFormat.addLookupKeys)d.i18nFormat.addLookupKeys(n,s,t,a,g);else{var r;u&&(r=d.pluralResolver.getSuffix(t,g.count,g));var o="".concat(d.options.pluralSeparator,"zero");if(u&&(n.push(s+r),c&&n.push(s+o)),l){var i="".concat(s).concat(d.options.contextSeparator).concat(g.context);n.push(i),u&&(n.push(i+r),c&&n.push(i+o))}}for(;e=n.pop();)d.isValidLookup(f)||(p=e,f=d.getResource(t,a,e,g))}}))})}}),{res:f,usedKey:o,exactUsedKey:p,usedLng:h,usedNS:i}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n,r){var o=3<arguments.length&&void 0!==r?r:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,o):this.resourceStore.getResource(t,e,n,o)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),B}();function ot(t){return t.charAt(0).toUpperCase()+t.slice(1)}var it=(O(at,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&-1<t.indexOf("-")){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=ot(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=ot(n[1].toLowerCase())),-1<e.indexOf(n[2].toLowerCase())&&(n[2]=ot(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return"languageOnly"!==this.options.load&&!this.options.nonExplicitSupportedLngs||(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||-1<this.supportedLngs.indexOf(t)}},{key:"getBestMatchFromCodes",value:function(t){var n,r=this;return t?(t.forEach(function(t){if(!n){var e=r.formatLanguageCode(t);r.options.supportedLngs&&!r.isSupportedCode(e)||(n=e)}}),!n&&this.options.supportedLngs&&t.forEach(function(t){if(!n){var e=r.getLanguagePartFromCode(t);if(r.isSupportedCode(e))return n=e;n=r.options.supportedLngs.find(function(t){return t!==e&&(t.indexOf("-")<0&&e.indexOf("-")<0||0!==t.indexOf(e))?void 0:t})}}),n=n||this.getFallbackCodes(this.options.fallbackLng)[0]):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return(n=(n=(n=(n=n||t[this.getScriptPartFromCode(e)])||t[this.formatLanguageCode(e)])||t[this.getLanguagePartFromCode(e)])||t.default)||[]}},{key:"toResolveHierarchy",value:function(t,e){function n(t){t&&(r.isSupportedCode(t)?i.push(t):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))}var r=this,o=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[];return"string"==typeof t&&-1<t.indexOf("-")?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(t))):"string"==typeof t&&n(this.formatLanguageCode(t)),o.forEach(function(t){i.indexOf(t)<0&&n(r.formatLanguageCode(t))}),i}}]),at);function at(t){v(this,at),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=D.create("languageUtils")}var st=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ut={1:function(t){return Number(1<t)},2:function(t){return Number(1!=t)},3:function(){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:3<=t%100&&t%100<=10?3:11<=t%100?4:5)},6:function(t){return Number(1==t?0:2<=t&&t<=4?1:2)},7:function(t){return Number(1==t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(2<=t)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:2<t&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&(t%100<10||20<=t%100)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||1<t%100&&t%100<11?1:10<t%100&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||0<t%100&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||10<t)&&t%10==0?2:3)}},ct=["v1","v2","v3"],lt={zero:0,one:1,two:2,few:3,many:4,other:5};var ft=(O(pt,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&1<r.resolvedOptions().pluralCategories.length:r&&1<r.numbers.length}},{key:"getPluralFormsOfKey",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{};return this.getSuffixes(t,r).map(function(t){return"".concat(e).concat(t)})}},{key:"getSuffixes",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{},o=this.getRule(e,r);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort(function(t,e){return lt[t]-lt[e]}).map(function(t){return"".concat(n.options.prepend).concat(t)}):o.numbers.map(function(t){return n.getSuffix(e,t,r)}):[]}},{key:"getSuffix",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},o=this.getRule(t,r);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(o.select(e)):this.getSuffixRetroCompatible(o,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,r=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),o=t.numbers[r];function i(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()}return this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===o?o="plural":1===o&&(o="")),"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!ct.includes(this.options.compatibilityJSON)}}]),pt);function pt(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};v(this,pt),this.languageUtils=t,this.options=e,this.logger=D.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},st.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:ut[e.fc]}})}),n)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gt(t,e,n,r,o){var i,a,s,u=3<arguments.length&&void 0!==r?r:".",c=!(4<arguments.length&&void 0!==o)||o,l=(i=e,void 0!==(s=H(t,a=n))?s:H(i,a));return!l&&c&&"string"==typeof n&&void 0===(l=X(t,n,u))&&(l=X(e,n,u)),l}var yt=(O(vt,[{key:"init",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escape=void 0!==n.escape?n.escape:K,this.escapeValue=void 0===n.escapeValue||n.escapeValue,this.useRawValueToEscape=void 0!==n.useRawValueToEscape&&n.useRawValueToEscape,this.prefix=n.prefix?q(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?q(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=!this.unescapePrefix&&n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?q(n.nestingPrefix):n.nestingPrefixEscaped||q("$t("),this.nestingSuffix=n.nestingSuffix?q(n.nestingSuffix):n.nestingSuffixEscaped||q(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=void 0!==n.alwaysFormat&&n.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(o,i,a,s){var u,c,l,f=this,p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function e(t){return t.replace(/\$/g,"$$$$")}function h(t){if(t.indexOf(f.formatSeparator)<0){var e=gt(i,p,t,f.options.keySeparator,f.options.ignoreJSONStructure);return f.alwaysFormat?f.format(e,void 0,a,dt(dt(dt({},s),i),{},{interpolationkey:t})):e}var n=t.split(f.formatSeparator),r=n.shift().trim(),o=n.join(f.formatSeparator).trim();return f.format(gt(i,p,r,f.options.keySeparator,f.options.ignoreJSONStructure),o,a,dt(dt(dt({},s),i),{},{interpolationkey:r}))}this.resetRegExp();var d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,g=s&&s.interpolation&&void 0!==s.interpolation.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return e(t)}},{regex:this.regexp,safeValue:function(t){return f.escapeValue?e(f.escape(t)):e(t)}}].forEach(function(t){for(l=0;u=t.regex.exec(o);){var e=u[1].trim();if(void 0===(c=h(e)))if("function"==typeof d){var n=d(o,u,s);c="string"==typeof n?n:""}else if(s&&Object.prototype.hasOwnProperty.call(s,e))c="";else{if(g){c=u[0];continue}f.logger.warn("missed to pass in variable ".concat(e," for interpolating ").concat(o)),c=""}else"string"==typeof c||f.useRawValueToEscape||(c=F(c));var r=t.safeValue(c);if(o=o.replace(u[0],r),g?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=u[0].length):t.regex.lastIndex=0,++l>=f.maxReplaces)break}}),o}},{key:"nest",value:function(t,e,n){var r,o,s,i=this,a=2<arguments.length&&void 0!==n?n:{};function u(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0];var i=(o=this.interpolate(o,s)).match(/'/g),a=o.match(/"/g);(i&&i.length%2==0&&!a||a.length%2!=0)&&(o=o.replace(/'/g,'"'));try{s=JSON.parse(o),t&&(s=dt(dt({},t),s))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete s.defaultValue,e}for(;r=this.nestingRegexp.exec(t);){var c=[];(s=(s=dt({},a)).replace&&"string"!=typeof s.replace?s.replace:s).applyPostProcessor=!1,delete s.defaultValue;var l=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){var f=r[1].split(this.formatSeparator).map(function(t){return t.trim()});r[1]=f.shift(),c=f,l=!0}if((o=e(u.call(this,r[1].trim(),s),s))&&r[0]===t&&"string"!=typeof o)return o;"string"!=typeof o&&(o=F(o)),o||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(t)),o=""),l&&(o=c.reduce(function(t,e){return i.format(t,e,a.lng,dt(dt({},a),{},{interpolationkey:r[1].trim()}))},o.trim())),t=t.replace(r[0],o),this.regexp.lastIndex=0}return t}}]),vt);function vt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};v(this,vt),this.logger=D.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t},this.init(t)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ot(i){var a={};return function(t,e,n){var r=e+JSON.stringify(n),o=a[r];return o||(o=i(e,n),a[r]=o),o(t)}}var wt=(O(kt,[{key:"init",value:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"addCached",value:function(t,e){this.formats[t.toLowerCase().trim()]=Ot(e)}},{key:"format",value:function(t,e,u,n){var c=this,l=3<arguments.length&&void 0!==n?n:{};return e.split(this.formatSeparator).reduce(function(t,e){var n=function(t){var e=t.toLowerCase().trim(),o={};if(-1<t.indexOf("(")){var n=t.split("(");e=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);"currency"===e&&r.indexOf(":")<0?o.currency||(o.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?o.range||(o.range=r.trim()):r.split(";").forEach(function(t){if(t){var e=L(t.split(":")),n=e[0],r=e.slice(1).join(":").trim().replace(/^'+|'+$/g,"");o[n.trim()]||(o[n.trim()]=r),"false"===r&&(o[n.trim()]=!1),"true"===r&&(o[n.trim()]=!0),isNaN(r)||(o[n.trim()]=parseInt(r,10))}})}return{formatName:e,formatOptions:o}}(e),r=n.formatName,o=n.formatOptions;if(c.formats[r]){var i=t;try{var a=l&&l.formatParams&&l.formatParams[l.interpolationkey]||{},s=a.locale||a.lng||l.locale||l.lng||u;i=c.formats[r](t,s,bt(bt(bt({},o),l),a))}catch(t){c.logger.warn(t)}return i}return c.logger.warn("there was no format function for ".concat(r)),t},t)}}]),kt);function kt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};v(this,kt),this.logger=D.create("formatter"),this.options=t,this.formats={number:Ot(function(t,e){var n=new Intl.NumberFormat(t,bt({},e));return function(t){return n.format(t)}}),currency:Ot(function(t,e){var n=new Intl.NumberFormat(t,bt(bt({},e),{},{style:"currency"}));return function(t){return n.format(t)}}),datetime:Ot(function(t,e){var n=new Intl.DateTimeFormat(t,bt({},e));return function(t){return n.format(t)}}),relativetime:Ot(function(t,e){var n=new Intl.RelativeTimeFormat(t,bt({},e));return function(t){return n.format(t,e.range||"day")}}),list:Ot(function(t,e){var n=new Intl.ListFormat(t,bt({},e));return function(t){return n.format(t)}})},this.init(t)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pt(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}var jt=function(){x(a,_);var i=Pt(a);function a(t,e,n){var r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return v(this,a),r=i.call(this),J&&_.call(w(r)),r.backend=t,r.store=e,r.services=n,r.languageUtils=n.languageUtils,r.options=o,r.logger=D.create("backendConnector"),r.waitingReads=[],r.maxParallelReads=o.maxParallelReads||10,r.readingCalls=0,r.maxRetries=0<=o.maxRetries?o.maxRetries:5,r.retryTimeout=1<=o.retryTimeout?o.retryTimeout:350,r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,o.backend,o),r}return O(a,[{key:"queueLoad",value:function(t,e,o,n){var i=this,a={},s={},u={},c={};return t.forEach(function(n){var r=!0;e.forEach(function(t){var e="".concat(n,"|").concat(t);!o.reload&&i.store.hasResourceBundle(n,t)?i.state[e]=2:i.state[e]<0||(1===i.state[e]?void 0===s[e]&&(s[e]=!0):(i.state[e]=1,r=!1,void 0===s[e]&&(s[e]=!0),void 0===a[e]&&(a[e]=!0),void 0===c[t]&&(c[t]=!0)))}),r||(u[n]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(c,l,t){var e=c.split("|"),f=e[0],p=e[1];l&&this.emit("failedLoading",f,p,l),t&&this.store.addResourceBundle(f,p,t),this.state[c]=l?-1:2;var h={};this.queue.forEach(function(n){var t,e,r,o,i,a,s,u;t=n.loaded,e=p,o=U(t,[f],Object),i=o.obj,a=o.k,i[a]=i[a]||[],r&&(i[a]=i[a].concat(e)),r||i[a].push(e),u=c,void 0!==(s=n).pending[u]&&(delete s.pending[u],s.pendingCount--),l&&n.errors.push(l),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(function(e){h[e]||(h[e]={});var t=n.loaded[e];t.length&&t.forEach(function(t){void 0===h[e][t]&&(h[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(function(t){return!t.done})}},{key:"read",value:function(r,o,i,t,e,n){var a=this,s=3<arguments.length&&void 0!==t?t:0,u=4<arguments.length&&void 0!==e?e:this.retryTimeout,c=5<arguments.length?n:void 0;if(!r.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:r,ns:o,fcName:i,tried:s,wait:u,callback:c});else{this.readingCalls++;function l(t,e){if(a.readingCalls--,0<a.waitingReads.length){var n=a.waitingReads.shift();a.read(n.lng,n.ns,n.fcName,n.tried,n.wait,n.callback)}t&&e&&s<a.maxRetries?setTimeout(function(){a.read.call(a,r,o,i,s+1,2*u,c)},u):c(t,e)}var f=this.backend[i].bind(this.backend);if(2!==f.length)return f(r,o,l);try{var p=f(r,o);p&&"function"==typeof p.then?p.then(function(t){return l(null,t)}).catch(l):l(null,p)}catch(t){l(t)}}}},{key:"prepareLoading",value:function(t,e,n,r){var o=this,i=2<arguments.length&&void 0!==n?n:{},a=3<arguments.length?r:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var s=this.queueLoad(t,e,i,a);if(!s.toLoad.length)return s.pending.length||a(),null;s.toLoad.forEach(function(t){o.loadOne(t)})}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(n,t){var r=this,o=1<arguments.length&&void 0!==t?t:"",e=n.split("|"),i=e[0],a=e[1];this.read(i,a,"read",void 0,void 0,function(t,e){t&&r.logger.warn("".concat(o,"loading namespace ").concat(a," for language ").concat(i," failed"),t),!t&&e&&r.logger.log("".concat(o,"loaded namespace ").concat(a," for language ").concat(i),e),r.loaded(n,t,e)})}},{key:"saveMissing",value:function(t,e,n,r,o,i,a){var s=5<arguments.length&&void 0!==i?i:{},u=6<arguments.length&&void 0!==a?a:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){var c=St(St({},s),{},{isUpdate:o}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var f;(f=5===l.length?l(t,e,n,r,c):l(t,e,n,r))&&"function"==typeof f.then?f.then(function(t){return u(null,t)}).catch(u):u(null,f)}catch(t){u(t)}else l(t,e,n,r,u,c)}t&&t[0]&&this.store.addResource(t[0],e,n,r)}}}]),a}();function Et(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===M(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===M(t[2])||"object"===M(t[3])){var n=t[3]||t[2];Object.keys(n).forEach(function(t){e[t]=n[t]})}return e},interpolation:{escapeValue:!0,format:function(t){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Lt(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ct(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)}}function Tt(){}var Dt=function(){x(s,_);var o=Ct(s);function s(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;if(v(this,s),t=o.call(this),J&&_.call(w(t)),t.options=Lt(n),t.services={},t.logger=D,t.modules={external:[]},e=w(t),Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}),r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),S(t,w(t));setTimeout(function(){t.init(n,r)},0)}return t}return O(s,[{key:"init",value:function(t,e){var o=this,n=0<arguments.length&&void 0!==t?t:{},r=1<arguments.length?e:void 0;"function"==typeof n&&(r=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&("string"==typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var i=Et();function a(t){return t?"function"==typeof t?new t:t:null}if(this.options=Nt(Nt(Nt({},i),this.options),Lt(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=Nt(Nt({},i.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var s;this.modules.logger?D.init(a(this.modules.logger),this.options):D.init(null,this.options),this.modules.formatter?s=this.modules.formatter:"undefined"!=typeof Intl&&(s=wt);var u=new it(this.options);this.store=new Y(this.options.resources,this.options);var c=this.services;c.logger=D,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new ft(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!s||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(c.formatter=a(s),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new yt(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new jt(a(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))}),this.modules.languageDetector&&(c.languageDetector=a(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=a(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new rt(this.services,this.options),this.translator.on("*",function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))}),this.modules.external.forEach(function(t){t.init&&t.init(o)})}if(this.format=this.options.interpolation.format,r=r||Tt,this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);0<l.length&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(e){o[e]=function(){var t;return(t=o.store)[e].apply(t,arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(e){o[e]=function(){var t;return(t=o.store)[e].apply(t,arguments),o}});function f(){function t(t,e){o.isInitialized&&!o.initializedStoreOnce&&o.logger.warn("init: i18next is already initialized. You should call init just once!"),o.isInitialized=!0,o.options.isClone||o.logger.log("initialized",o.options),o.emit("initialized",o.options),p.resolve(e),r(t,e)}if(o.languages&&"v1"!==o.options.compatibilityAPI&&!o.isInitialized)return t(null,o.t.bind(o));o.changeLanguage(o.options.lng,t)}var p=I();return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),p}},{key:"loadResources",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:Tt,o="string"==typeof t?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();function i(t){t&&n.services.languageUtils.toResolveHierarchy(t).forEach(function(t){a.indexOf(t)<0&&a.push(t)})}var a=[];if(o)i(o);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return i(t)});this.options.preload&&this.options.preload.forEach(function(t){return i(t)}),this.services.backendConnector.load(a,this.options.ns,function(t){t||n.resolvedLanguage||!n.language||n.setResolvedLanguage(n.language),r(t)})}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=I();return t=t||this.languages,e=e||this.options.ns,n=n||Tt,this.services.backendConnector.reload(t,e,function(t){r.resolve(),n(t)}),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&Q.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(-1<["cimode","dev"].indexOf(t)))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(-1<["cimode","dev"].indexOf(n))&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,o){var i=this;this.isLanguageChangingTo=e;var a=I();this.emit("languageChanging",e);function s(t){i.language=t,i.languages=i.services.languageUtils.toResolveHierarchy(t),i.resolvedLanguage=void 0,i.setResolvedLanguage(t)}function t(t){e||t||!i.services.languageDetector||(t=[]);var r="string"==typeof t?t:i.services.languageUtils.getBestMatchFromCodes(t);r&&(i.language||s(r),i.translator.language||i.translator.changeLanguage(r),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage&&i.services.languageDetector.cacheUserLanguage(r)),i.loadResources(r,function(t){var e,n;e=t,(n=r)?(s(n),i.translator.changeLanguage(n),i.isLanguageChangingTo=void 0,i.emit("languageChanged",n),i.logger.log("languageChanged",n)):i.isLanguageChangingTo=void 0,a.resolve(function(){return i.t.apply(i,arguments)}),o&&o(e,function(){return i.t.apply(i,arguments)})})}return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(t):this.services.languageDetector.detect(t):t(e):t(this.services.languageDetector.detect()),a}},{key:"getFixedT",value:function(t,e,u){function c(t,e){var n;if("object"!==M(e)){for(var r=arguments.length,o=new Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];n=l.options.overloadTranslationOptionHandler([t,e].concat(o))}else n=Nt({},e);n.lng=n.lng||c.lng,n.lngs=n.lngs||c.lngs,n.ns=n.ns||c.ns,n.keyPrefix=n.keyPrefix||u||c.keyPrefix;var a,s=l.options.keySeparator||".";return a=n.keyPrefix&&Array.isArray(t)?t.map(function(t){return"".concat(n.keyPrefix).concat(s).concat(t)}):n.keyPrefix?"".concat(n.keyPrefix).concat(s).concat(t):t,l.t(a,n)}var l=this;return"string"==typeof t?c.lng=t:c.lngs=t,c.ns=e,c.keyPrefix=u,c}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t,e){var r=this,n=1<arguments.length&&void 0!==e?e:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===o.toLowerCase())return!0;function s(t,e){var n=r.services.backendConnector.state["".concat(t,"|").concat(e)];return-1===n||2===n}if(n.precheck){var u=n.precheck(this,s);if(void 0!==u)return u}return!!this.hasResourceBundle(o,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(o,t)||i&&!s(a,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=I();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),this.loadResources(function(t){r.resolve(),e&&e(t)}),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=I();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],o=t.filter(function(t){return r.indexOf(t)<0});return o.length?(this.options.preload=r.concat(o),this.loadResources(function(t){n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(!(t=t||(this.resolvedLanguage||(this.languages&&0<this.languages.length?this.languages[0]:this.language))))return"rtl";var e=this.services&&this.services.languageUtils||new it(Et());return-1<["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(e.getLanguagePartFromCode(t))||1<t.toLowerCase().indexOf("-arab")?"rtl":"ltr"}},{key:"cloneInstance",value:function(t,e){var n=this,r=0<arguments.length&&void 0!==t?t:{},o=1<arguments.length&&void 0!==e?e:Tt,i=Nt(Nt(Nt({},this.options),r),{isClone:!0}),a=new s(i);void 0===r.debug&&void 0===r.prefix||(a.logger=a.logger.clone(r));return["store","services","language"].forEach(function(t){a[t]=n[t]}),a.services=Nt({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new rt(a.services,a.options),a.translator.on("*",function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a.emit.apply(a,[t].concat(n))}),a.init(i,o),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),s}();j(Dt,"createInstance",function(){return new Dt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},1<arguments.length?arguments[1]:void 0)});var _t=Dt.createInstance();function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}_t.createInstance=Dt.createInstance,_t.createInstance,_t.dir,_t.init,_t.loadResources,_t.reloadResources,_t.use,_t.changeLanguage,_t.getFixedT,_t.t,_t.exists,_t.setDefaultNamespace,_t.hasLoadedNamespace,_t.loadNamespaces,_t.loadLanguages;var It=[],Ft=It.forEach,Ut=It.slice;function Bt(n){return Ft.call(Ut.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n}function Mt(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":At(XMLHttpRequest))}var Ht="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kt,Jt={exports:{}},zt={exports:{}};function Xt(){return Kt||(Kt=1,function(t,e){var x,n="undefined"!=typeof self?self:qt,r=(o.prototype=n,new o);function o(){this.fetch=!1,this.DOMException=n.DOMException}x=r,function(s){var n="URLSearchParams"in x,r="Symbol"in x&&"iterator"in Symbol,u="FileReader"in x&&"Blob"in x&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in x,i="ArrayBuffer"in x;if(i)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function d(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:u&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i&&u&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(t)||a(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=h(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=c(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[c(t)]},f.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},f.prototype.set=function(t,e){this.map[c(t)]=l(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},f.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var n,r,o=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<v.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var o=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");o.append(decodeURIComponent(n),decodeURIComponent(r))}}),o}function O(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];O.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},s.DOMException=x.DOMException;try{new s.DOMException}catch(t){s.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function k(o,a){return new Promise(function(r,t){var e=new m(o,a);if(e.signal&&e.signal.aborted)return t(new s.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function n(){i.abort()}i.onload=function(){var t,o,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",o=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();o.append(n,r)}}),o)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var n="response"in i?i.response:i.responseText;r(new O(n,e))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.onabort=function(){t(new s.DOMException("Aborted","AbortError"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&u&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),e.signal&&(e.signal.addEventListener("abort",n),i.onreadystatechange=function(){4===i.readyState&&e.signal.removeEventListener("abort",n)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})}k.polyfill=!0,x.fetch||(x.fetch=k,x.Headers=f,x.Request=m,x.Response=O),s.Headers=f,s.Request=m,s.Response=O,s.fetch=k,Object.defineProperty(s,"__esModule",{value:!0})}({}),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(zt,zt.exports)),zt.exports}!function(t,e){var n;if("function"==typeof fetch&&(n=void 0!==qt&&qt.fetch?qt.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"==typeof window||void 0===window.document){var r=n||Xt();r.default&&(r=r.default),e.default=r,t.exports=e.default}}(Jt,Jt.exports);var Gt,$t,Wt,Yt=Jt.exports,Qt=Vt(Yt),Zt=t({__proto__:null,default:Qt},[Yt]);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"function"==typeof fetch&&(Gt=void 0!==Ht&&Ht.fetch?Ht.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),Mt()&&(void 0!==Ht&&Ht.XMLHttpRequest?$t=Ht.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&($t=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==Ht&&Ht.ActiveXObject?Wt=Ht.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(Wt=window.ActiveXObject)),Gt||!Zt||$t||Wt||(Gt=Qt||Zt),"function"!=typeof Gt&&(Gt=void 0);function ee(t,e){if(e&&"object"===te(e)){var n="";for(var r in e)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e[r]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function ne(t,e,n){Gt(t,e).then(function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then(function(t){n(null,{status:e.status,data:t})}).catch(n)}).catch(n)}function re(t,e,n,r){return"function"==typeof n&&(r=n,n=void 0),r=r||function(){},Gt&&0!==e.indexOf("file:")?function(t,e,n,r){t.queryStringParams&&(e=ee(e,t.queryStringParams));var o=Bt({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);n&&(o["Content-Type"]="application/json");var i="function"==typeof t.requestOptions?t.requestOptions(n):t.requestOptions,a=Bt({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:o},oe?{}:i);try{ne(e,a,r)}catch(t){if(!i||0===Object.keys(i).length||!t.message||t.message.indexOf("not implemented")<0)return r(t);try{Object.keys(i).forEach(function(t){delete a[t]}),ne(e,a,r),oe=!0}catch(t){r(t)}}}(t,e,n,r):Mt()||"function"==typeof ActiveXObject?function(t,e,n,r){n&&"object"===te(n)&&(n=ee("",n).slice(1)),t.queryStringParams&&(e=ee(e,t.queryStringParams));try{var o;(o=$t?new $t:new Wt("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",e,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var i=t.customHeaders;if(i="function"==typeof i?i():i)for(var a in i)o.setRequestHeader(a,i[a]);o.onreadystatechange=function(){3<o.readyState&&r(400<=o.status?o.statusText:null,{status:o.status,data:o.responseText})},o.send(n)}catch(t){console&&console.log(t)}}(t,e,n,r):void r(new Error("No fetch and no xhr implementation found!"))}var oe=!1;function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function se(t){var e=function(t,e){if("object"!==ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);var r=n.call(t,e||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===ie(e)?e:String(e)}function ue(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,n){return r={},i=n||"",(o=se(o=e))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r;var r,o,i},parseLoadPayload:function(){},request:re,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}}var ce,le,fe=(ae((ce=pe).prototype,[{key:"init",value:function(t,e,n){var r=this,o=1<arguments.length&&void 0!==e?e:{},i=2<arguments.length&&void 0!==n?n:{};this.services=t,this.options=Bt(o,this.options||{},ue()),this.allOptions=i,this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(t,e,n){this._readAny(t,t,e,e,n)}},{key:"read",value:function(t,e,n){this._readAny([t],t,[e],e,n)}},{key:"_readAny",value:function(n,r,o,i,a){var t,e,s=this,u=this.options.loadPath;"function"==typeof this.options.loadPath&&(u=this.options.loadPath(n,o)),(u=(e=t=u)&&"function"==typeof e.then?t:Promise.resolve(t)).then(function(t){if(!t)return a(null,{});var e=s.services.interpolator.interpolate(t,{lng:n.join("+"),ns:o.join("+")});s.loadUrl(e,a,r,i)})}},{key:"loadUrl",value:function(o,i,a,s){var u=this,t="string"==typeof a?[a]:a,e="string"==typeof s?[s]:s,n=this.options.parseLoadPayload(t,e);this.options.request(this.options,o,n,function(t,e){if(e&&(500<=e.status&&e.status<600||!e.status))return i("failed loading "+o+"; status code: "+e.status,!0);if(e&&400<=e.status&&e.status<500)return i("failed loading "+o+"; status code: "+e.status,!1);if(!e&&t&&t.message&&-1<t.message.indexOf("Failed to fetch"))return i("failed loading "+o+": "+t.message,!0);if(t)return i(t,!1);var n,r;try{n="string"==typeof e.data?u.options.parse(e.data,a,s):e.data}catch(t){r="failed parsing "+o+" to json"}if(r)return i(r,!1);i(null,n)})}},{key:"create",value:function(r,o,t,e,i){var a=this;if(this.options.addPath){"string"==typeof r&&(r=[r]);var s=this.options.parsePayload(o,t,e),u=0,c=[],l=[];r.forEach(function(t){var e=a.options.addPath;"function"==typeof a.options.addPath&&(e=a.options.addPath(t,o));var n=a.services.interpolator.interpolate(e,{lng:t,ns:o});a.options.request(a.options,n,s,function(t,e){u+=1,c.push(t),l.push(e),u===r.length&&"function"==typeof i&&i(c,l)})})}}},{key:"reload",value:function(){var t=this,e=this.services,o=e.backendConnector,n=e.languageUtils,i=e.logger,r=o.language;if(!r||"cimode"!==r.toLowerCase()){function a(t){n.toResolveHierarchy(t).forEach(function(t){s.indexOf(t)<0&&s.push(t)})}var s=[];a(r),this.allOptions.preload&&this.allOptions.preload.forEach(function(t){return a(t)}),s.forEach(function(r){t.allOptions.ns.forEach(function(n){o.read(r,n,"read",null,null,function(t,e){t&&i.warn("loading namespace ".concat(n," for language ").concat(r," failed"),t),!t&&e&&i.log("loaded namespace ".concat(n," for language ").concat(r),e),o.loaded("".concat(r,"|").concat(n),t,e)})})})}}}]),le&&ae(ce,le),Object.defineProperty(ce,"prototype",{writable:!1}),pe);function pe(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,pe),this.services=t,this.options=e,this.allOptions=n,this.type="backend",this.init(t,e,n)}fe.type="backend";function he(t){return t instanceof ye}function de(t){return t instanceof ve}var ge,ye=Phaser.Scene,ve=Phaser.Game,me=Phaser.Utils.Objects.GetValue,be=function(){function n(t,e){i(this,n),this.setParent(t),this.isShutdown=!1,this.setEventEmitter(me(e,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}return e(n,[{key:"shutdown",value:function(){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onEnvDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}},{key:"setParent",value:function(t){var e,n;return this.parent=t,this.scene=null==(e=t)||"object"!==r(e)?null:he(e)?e:e.scene&&he(e.scene)?e.scene:e.parent&&e.parent.scene&&he(e.parent.scene)?e.parent.scene:null,this.game=null==(n=t)||"object"!==r(n)?null:de(n)?n:de(n.game)?n.game:he(n)?n.sys.game:he(n.scene)?n.scene.sys.game:void 0,this}}]),n}();Object.assign(be.prototype,p);var Oe=Phaser.Utils.Objects.GetValue,we=function(){a(o,be);var r=c(o);function o(t,e){var n;return i(this,o),(n=r.call(this,t,e)).resetFromJSON(e),n.onLanguageChanged=n.updateText.bind(u(n)),ge.on("languageChanged",n.onLanguageChanged),n}return e(o,[{key:"resetFromJSON",value:function(t){return this.setSetTextCallback(Oe(t,"setText",ke)),this.setInterpolation(Oe(t,"interpolation")),this.setTranslationKey(Oe(t,"translationKey","")),Oe(t,"updateText",!0)&&this.updateText(),this}},{key:"shutdown",value:function(t){this.isShutdown||(ge.off("languageChanged",this.onLanguageChanged),this.interpolation=null,l(s(o.prototype),"shutdown",this).call(this,t))}},{key:"setSetTextCallback",value:function(t){return this.setTextCallback=t,this}},{key:"setInterpolation",value:function(t){return this.interpolation=t,this}},{key:"updateInterpolation",value:function(t,e){if(this.interpolation||(this.interpolation={}),"string"==typeof t)this.interpolation[t]=e;else{var n=t;for(t in n)this.interpolation[t]=n[t]}return this}},{key:"setTranslationKey",value:function(t){return this.translationKey=t,this}},{key:"updateText",value:function(){var t=ge.t(this.translationKey,this.interpolation);return this.setTextCallback(this.parent,t),this}}],[{key:"setI18Next",value:function(t){ge=t}}]),o}(),ke=function(t,e){t.setText(e)},xe=function(){a(r,Phaser.Plugins.BasePlugin);var n=c(r);function r(t){var e;return i(this,r),(e=n.call(this,t)).setEventEmitter(),e.i18next=_t,we.setI18Next(_t),e.onLanguageChanged=function(t){this.emit("languageChanged",t)}.bind(u(e)),_t.on("languageChanged",e.onLanguageChanged),e}return e(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"destroy",value:function(){_t.off("languageChanged",this.onLanguageChanged),l(s(r.prototype),"destroy",this).call(this),this.destroyEventEmitter()}},{key:"initI18Next",value:function(t,n){return f.call(t.load,function(t,e){_t.use(fe).init(n,t)}),this}},{key:"add",value:function(t,e){return new we(t,e)}},{key:"changeLanguage",value:function(t,e){return _t.changeLanguage(t,e),this}},{key:"setDefaultNamespace",value:function(t){return _t.setDefaultNamespace(t),this}},{key:"t",value:function(t,e){return _t.t(t,e)}}]),r}();return Object.assign(xe.prototype,p),xe});
